webpackJsonp([1],{Alhj:function(t,e){},LCRO:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("7+uW"),n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var r=i("VU/8")({name:"App"},n,!1,function(t){i("LCRO")},null,null).exports,a=i("/ocq"),o=i("c/Tr"),u=i.n(o),l={name:"Gift",props:{trigger:{type:Date,default:!1},config:{type:Object,required:!0}},data:function(){return{isRunning:!1,currentDeg:0,targetDeg:0,giftsDeg:[]}},computed:{displayType:function(){return this.config.run3D?"three-dimension":"flat"},rotate:function(){return 360/this.config.gifts.length},translateZ:function(){return this.config.height/2/Math.tan(this.rotate/2/180*Math.PI)}},watch:{config:{handler:function(){this.setConfig()},deep:!0},trigger:function(){this.autoTurn()},isRunning:function(){var t=this;this.isRunning&&setTimeout(function(){t.autoTurnStop()},this.config.duration+200)}},mounted:function(){this.setConfig(),this.logGiftsDeg()},destroyed:function(){},methods:{logGiftsDeg:function(){var t=this;this.config.gifts.forEach(function(e,i){t.giftsDeg[i]={from:0===i?0:t.giftsDeg[i-1].to,to:0===i?t.rotate:t.giftsDeg[i-1].to+t.rotate,name:e.name}})},setConfig:function(){this.$el.style.setProperty("--rotateY",this.config.rotateY+"deg"),this.$el.style.setProperty("--duration",this.config.duration+"ms"),this.$el.style.setProperty("--fontSize",this.config.fontSize+"px"),this.$el.style.setProperty("--height",this.config.height+"px"),this.$el.style.setProperty("--width",this.config.width+"px"),this.$el.style.setProperty("--currentDeg","-"+this.currentDeg+"deg")},autoTurn:function(){var t=360*Math.random()+1800;t-=t%this.rotate,this.targetDeg=t;var e=this.config.rollback?Math.random()*this.config.rollback+1:1;this.$el.style.setProperty("--targetDeg","-"+this.targetDeg+"deg"),this.$el.style.setProperty("--rollBackDeg",""+e),this.isRunning=!0},autoTurnStop:function(){this.currentDeg=this.targetDeg%360,this.$el.style.setProperty("--currentDeg","-"+this.currentDeg+"deg");var t=null,e=this.currentDeg+this.rotate/2;this.giftsDeg.forEach(function(i){e>=i.from&&e<=i.to&&(t=i.name)}),this.isRunning=!1,this.$emit("finished",t)}}},c={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:["gift-container",t.displayType,{autoTurn:t.isRunning}]},t._l(t.config.gifts,function(e,s){return i("div",{key:s,class:["gift",t.config.style],style:"transform: rotateX("+t.rotate*s+"deg) translateZ("+t.translateZ+"px)"},["text"===e.type?[t._v(t._s(e.name))]:t._e(),t._v(" "),"image"===e.type?[i("img",{attrs:{src:e.path,height:t.config.height}})]:t._e()],2)}))},staticRenderFns:[]};var g={name:"DemoSlotMachine",components:{Gift:i("VU/8")(l,c,!1,function(t){i("Alhj")},null,null).exports},data:function(){return{run3D:!0,trigger:null,disabled:!1,configs:[{run3D:!1,rotateY:-25,duration:4e3,rollback:.3,fontSize:100,height:100,width:200,gifts:u()(new Array(10),function(t,e){return{type:"text",name:e}})},{run3D:!1,rotateY:-25,duration:5e3,rollback:.3,fontSize:100,height:100,width:200,gifts:u()(new Array(10),function(t,e){return{type:"text",name:e}})},{run3D:!1,rotateY:-25,duration:6e3,rollback:.3,fontSize:100,height:100,width:200,gifts:u()(new Array(10),function(t,e){return{type:"text",name:e}})}],openResultHistory:!1,result:[],resultHistory:[]}},methods:{turn:function(){this.disabled=!0,this.trigger=new Date},isFinished:function(t){var e=this.$el.querySelectorAll(".autoTurn");this.result.push(t),1===e.length&&(this.disabled=!1,this.resultHistory.push(this.result),this.result=[])},changeDisplayMode:function(t){this.configs.forEach(function(e){return e.run3D=t.target.checked})}}},h={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"DemoSlotMachine"},on:{click:function(e){if(e.target!==e.currentTarget)return null;t.openResultHistory=!1}}},[i("div",{class:["resultHistory",{openResultHistory:t.openResultHistory}]},t._l(t.resultHistory,function(e,s){return i("div",{key:s,staticClass:"result"},[t._v(t._s("Round"+(s+1)+": "+e))])})),t._v(" "),i("div",{staticClass:"container"},t._l(t.configs,function(e,s){return i("Gift",{key:s,attrs:{trigger:t.trigger,config:e},on:{finished:t.isFinished}})})),t._v(" "),i("div",{staticClass:"settings"},[i("button",{staticClass:"btn",attrs:{disabled:t.disabled},on:{click:t.turn}},[t._v("\n      START\n    ")]),t._v(" "),i("button",{staticClass:"btn",on:{click:function(e){t.openResultHistory=!0}}},[t._v("\n      Result History\n    ")]),t._v(" "),i("input",{staticClass:"displayType",attrs:{type:"checkbox",disabled:t.disabled},on:{change:t.changeDisplayMode}})])])},staticRenderFns:[]};var f=i("VU/8")(g,h,!1,function(t){i("r4hn")},"data-v-10e2530d",null).exports,d={name:"Gift",props:{trigger:{type:Date,default:!1},config:{type:Object,required:!0},resultNum:0},data:function(){return{isRunning:!1,currentDeg:0,targetDeg:0,giftsDeg:[]}},computed:{displayType:function(){return this.config.run3D?"three-dimension":"flat"},rotate:function(){return 360/this.config.gifts.length},translateZ:function(){return this.config.height/2/Math.tan(this.rotate/2/180*Math.PI)}},watch:{config:{handler:function(){this.setConfig()},deep:!0},trigger:function(){this.autoTurn()},isRunning:function(){var t=this;this.isRunning&&setTimeout(function(){t.autoTurnStop()},this.config.duration+200)}},mounted:function(){this.setConfig(),this.logGiftsDeg()},destroyed:function(){},methods:{logGiftsDeg:function(){var t=this;this.config.gifts.forEach(function(e,i){t.giftsDeg[i]={from:0===i?0:t.giftsDeg[i-1].to,to:0===i?t.rotate:t.giftsDeg[i-1].to+t.rotate,name:e.name}})},setConfig:function(){this.$el.style.setProperty("--rotateY",this.config.rotateY+"deg"),this.$el.style.setProperty("--duration",this.config.duration+"ms"),this.$el.style.setProperty("--fontSize",this.config.fontSize+"px"),this.$el.style.setProperty("--height",this.config.height+"px"),this.$el.style.setProperty("--width",this.config.width+"px"),this.$el.style.setProperty("--currentDeg","-"+this.currentDeg+"deg")},autoTurn:function(){var t=36*this.resultNum+1800;t-=t%this.rotate,this.targetDeg=t;var e=this.config.rollback?Math.random()*this.config.rollback+1:1;this.$el.style.setProperty("--targetDeg","-"+this.targetDeg+"deg"),this.$el.style.setProperty("--rollBackDeg",""+e),this.isRunning=!0},autoTurnStop:function(){this.currentDeg=this.targetDeg%360,this.$el.style.setProperty("--currentDeg","-"+this.currentDeg+"deg");var t=null,e=this.currentDeg+this.rotate/2;this.giftsDeg.forEach(function(i){e>=i.from&&e<=i.to&&(t=i.name)}),this.isRunning=!1,this.$emit("finished",t)}}},m={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:["gift-container",t.displayType,{autoTurn:t.isRunning}]},t._l(t.config.gifts,function(e,s){return i("div",{key:s,class:["gift",t.config.style],style:"transform: rotateX("+t.rotate*s+"deg) translateZ("+t.translateZ+"px)"},["text"===e.type?[t._v(t._s(e.name))]:t._e(),t._v(" "),"image"===e.type?[i("img",{attrs:{src:e.path,height:t.config.height}})]:t._e()],2)}))},staticRenderFns:[]};var p=i("VU/8")(d,m,!1,function(t){i("h66g")},null,null).exports,v={name:"Modal",props:{maxNum:"",list:Array},data:function(){return{maxNo:this.maxNum,stage1Nums:[this.list[0],this.list[1],this.list[2],this.list[3],this.list[4]],stage2Nums:[this.list[5],this.list[6],this.list[7],this.list[8]],stage3Nums:[this.list[9],this.list[10],this.list[11]],stage4Nums:[this.list[12],this.list[13]],stage5Num:[this.list[14]]}},computed:{},watch:{},mounted:function(){},destroyed:function(){},methods:{handleConfirm:function(){var t={maxNum:this.maxNum,stage1Nums:this.stage1Nums,stage2Nums:this.stage2Nums,stage3Nums:this.stage3Nums,stage4Nums:this.stage4Nums,stage5Num:this.stage5Num};this.$emit("confirmed",t)},handleCancel:function(){this.$emit("calcelled")}}},y={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mask"},[i("div",{staticClass:"modal-container"},[i("div",{staticClass:"block"},[i("span",[t._v("抽奖最大人数（到场人数）：")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.maxNo,expression:"maxNo"}],domProps:{value:t.maxNo},on:{input:function(e){e.target.composing||(t.maxNo=e.target.value)}}})]),t._v(" "),i("div",{staticClass:"block"},[i("span",[t._v("五等奖（充电宝）内定：")]),t._v(" "),t._l(t.stage1Nums,function(e,s){return i("input",{directives:[{name:"model",rawName:"v-model",value:t.stage1Nums[s],expression:"stage1Nums[index]"}],key:s,domProps:{value:t.stage1Nums[s]},on:{input:function(e){e.target.composing||t.$set(t.stage1Nums,s,e.target.value)}}})})],2),t._v(" "),i("div",{staticClass:"block"},[i("span",[t._v("四等奖（体重秤）内定：")]),t._v(" "),t._l(t.stage2Nums,function(e,s){return i("input",{directives:[{name:"model",rawName:"v-model",value:t.stage2Nums[s],expression:"stage2Nums[index]"}],key:s,domProps:{value:t.stage2Nums[s]},on:{input:function(e){e.target.composing||t.$set(t.stage2Nums,s,e.target.value)}}})})],2),t._v(" "),i("div",{staticClass:"block"},[i("span",[t._v("三等奖（电水壶）内定：")]),t._v(" "),t._l(t.stage3Nums,function(e,s){return i("input",{directives:[{name:"model",rawName:"v-model",value:t.stage3Nums[s],expression:"stage3Nums[index]"}],key:s,domProps:{value:t.stage3Nums[s]},on:{input:function(e){e.target.composing||t.$set(t.stage3Nums,s,e.target.value)}}})})],2),t._v(" "),i("div",{staticClass:"block"},[i("span",[t._v("二等奖（吹风机）内定：")]),t._v(" "),t._l(t.stage4Nums,function(e,s){return i("input",{directives:[{name:"model",rawName:"v-model",value:t.stage4Nums[s],expression:"stage4Nums[index]"}],key:s,domProps:{value:t.stage4Nums[s]},on:{input:function(e){e.target.composing||t.$set(t.stage4Nums,s,e.target.value)}}})})],2),t._v(" "),i("div",{staticClass:"block"},[i("span",[t._v("一等奖（电饭煲）内定：")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.stage5Num[0],expression:"stage5Num[0]"}],domProps:{value:t.stage5Num[0]},on:{input:function(e){e.target.composing||t.$set(t.stage5Num,0,e.target.value)}}})]),t._v(" "),i("div",{staticClass:"block btn-container"},[i("div",{staticClass:"btn btn-confirm",on:{click:function(e){t.handleConfirm()}}},[t._v("确定")]),t._v(" "),i("div",{staticClass:"btn btn-cancel",on:{click:function(e){t.handleCancel()}}},[t._v("取消")])])])])},staticRenderFns:[]};var _={name:"SlotMachine",components:{Gift:p,Modal:i("VU/8")(v,y,!1,function(t){i("UuW3")},null,null).exports},data:function(){return{run3D:!1,trigger:null,active:!1,disabled:!1,configs:[{style:"gift-style",gifts:u()(new Array(10),function(t,e){return{type:"text",name:e}}),duration:4e3,fontSize:150,height:200,width:200},{style:"gift-style",gifts:u()(new Array(10),function(t,e){return{type:"text",name:e}}),duration:6e3,fontSize:150,height:200,width:200},{style:"gift-style",gifts:u()(new Array(10),function(t,e){return{type:"text",name:e}}),duration:8e3,fontSize:150,height:200,width:200}],openResultList:!1,resultList:[],result:[],count:0,displayHiddenSetting:!1,maxNum:230,list:Array(15),luckyNum:[0,0,0]}},watch:{count:function(t){t>=5&&(this.displayHiddenSetting=!0)}},methods:{turn:function(){if(this.isInDefaultList()){var t=this.list[this.resultList.length];1===t.length?t="00"+t:2===t.length&&(t="0"+t);for(var e=t.split(""),i=0;i<3;i++)e[i]=parseInt(e[i]);this.luckyNum=e}else this.luckyNum=this.getRandomNum();this.goToTurn()},goToTurn:function(){var t=this;this.active=!0,setTimeout(function(){t.active=!1},500),this.disabled=!0,this.trigger=new Date},isInDefaultList:function(){var t=this.resultList.length;return!!this.list[t]},getRandomNum:function(){var t=Math.ceil(Math.random()*this.maxNum)+"";if(1===t.length?t="00"+t:2===t.length&&(t="0"+t),this.isSuperLucky(t))return this.getRandomNum();for(var e=t.split(""),i=0;i<3;i++)e[i]=parseInt(e[i]);return e},isSuperLucky:function(t){for(var e=[],i=0;i<this.resultList.length;i++){var s=this.resultList[i].join("");e.push(s)}return-1!==e.indexOf(t)},isFinished:function(t){var e=this.$el.querySelectorAll(".autoTurn");this.result.push(t),1===e.length&&(this.disabled=!1,this.resultList.push(this.result),this.result=[])},isConfirmed:function(t){var e=t.maxNum,i=t.stage1Nums,s=t.stage2Nums,n=t.stage3Nums,r=t.stage4Nums,a=t.stage5Num;this.maxNum=e,this.list=i.concat(s).concat(n).concat(r).concat(a),this.count=0,this.displayHiddenSetting=!1},isCancelled:function(){this.count=0,this.displayHiddenSetting=!1}}},N={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"SlotMachine"}},[i("div",{staticClass:"hidden-trigger",on:{click:function(){t.count++}}}),t._v(" "),t._m(0),t._v(" "),i("div",{staticClass:"body"},[i("div",{staticClass:"window"},[i("div",{staticClass:"container"},[t._l(t.configs,function(e,s){return i("Gift",{key:s,attrs:{trigger:t.trigger,config:e,resultNum:t.luckyNum[s]},on:{finished:t.isFinished}})}),t._v(" "),i("div",{staticClass:"fence1"}),t._v(" "),i("div",{staticClass:"fence2"})],2)]),t._v(" "),i("div",{class:["handler",{active:t.active},{disabled:t.disabled}]},[i("div",{staticClass:"stick2"}),t._v(" "),i("div",{staticClass:"stick"}),t._v(" "),i("div",{staticClass:"ball",on:{click:function(e){!t.disabled&&t.turn()}}})])]),t._v(" "),i("div",{staticClass:"history",on:{click:function(e){t.openResultList=!0}}},[t._v("\n    查看结果\n  ")]),t._v(" "),i("div",{class:["resultList",{openResultList:t.openResultList}],on:{click:function(e){if(e.target!==e.currentTarget)return null;t.openResultList=!1}}},[i("div",{staticClass:"resultList-container"},t._l(t.resultList,function(e,s){return i("div",{key:s,staticClass:"result"},[t._v(t._s("Round"+(s+1)+": "+e.join("")))])}))]),t._v(" "),t.displayHiddenSetting?i("Modal",{attrs:{maxNum:t.maxNum,list:t.list},on:{confirmed:t.isConfirmed,calcelled:t.isCancelled}}):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"badge"},[e("span",[this._v("WishYouLuck~")])])}]};var D=i("VU/8")(_,N,!1,function(t){i("cXyj")},null,null).exports;s.a.use(a.a);var x=new a.a({routes:[{path:"/demo",name:"Demo",component:f},{path:"/",name:"SlotMachine",component:D}]});s.a.config.productionTip=!1,new s.a({el:"#app",router:x,components:{App:r},template:"<App/>"})},UuW3:function(t,e){},cXyj:function(t,e){},h66g:function(t,e){},r4hn:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.96ca527236bdfb759beb.js.map